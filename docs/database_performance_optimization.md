# üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ë–î InBack

**–î–∞—Ç–∞:** 22 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ - –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å 100%

---

## üìä –í—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –§–∞–∑–∞ 1: –£–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ)

**–£–¥–∞–ª–µ–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã:**
- ‚ùå `idx_property_complex` (–¥—É–±–ª–∏–∫–∞—Ç `idx_properties_complex_id`)
- ‚ùå `idx_property_developer` (–¥—É–±–ª–∏–∫–∞—Ç `idx_properties_developer_id`)

**–≠–∫–æ–Ω–æ–º–∏—è:** 32 KB –ø–∞–º—è—Ç–∏, —É—Å–∫–æ—Ä–µ–Ω–∏–µ INSERT/UPDATE –æ–ø–µ—Ä–∞—Ü–∏–π

---

### –§–∞–∑–∞ 2: –ù–æ–≤—ã–µ –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ properties (‚úÖ 5 –∏–Ω–¥–µ–∫—Å–æ–≤)

| –ò–Ω–¥–µ–∫—Å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –¢–∏–ø |
|---|---|---|
| `idx_properties_district_id` | –§–∏–ª—å—Ç—Ä –ø–æ —Ä–∞–π–æ–Ω—É | Partial (WHERE NOT NULL) |
| `idx_properties_is_active` | –§–∏–ª—å—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ | Partial (WHERE = true) |
| `idx_properties_floor` | –§–∏–ª—å—Ç—Ä "–ù–µ –ø–µ—Ä–≤—ã–π —ç—Ç–∞–∂" | Partial (WHERE NOT NULL) |
| `idx_properties_total_floors` | –§–∏–ª—å—Ç—Ä "–ù–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π" | Partial (WHERE NOT NULL) |
| `idx_properties_deal_type` | –¢–∏–ø —Å–¥–µ–ª–∫–∏ | Partial (WHERE NOT NULL) |

---

### –§–∞–∑–∞ 3: –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã (‚úÖ 4 –∏–Ω–¥–µ–∫—Å–∞)

**–î–ª—è –°–ê–ú–´–• –ß–ê–°–¢–´–• –∑–∞–ø—Ä–æ—Å–æ–≤:**

#### 1Ô∏è‚É£ `idx_properties_hot_search`
```sql
CREATE INDEX ON properties(is_active, complex_id, rooms, price) 
WHERE is_active = true;
```
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ü–æ–∏—Å–∫ –∫–≤–∞—Ä—Ç–∏—Ä –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –ñ–ö —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ –∫–æ–º–Ω–∞—Ç–∞–º –∏ —Ü–µ–Ω–µ  
**–≠—Ñ—Ñ–µ–∫—Ç:** –£—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ **10-20 —Ä–∞–∑** –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### 2Ô∏è‚É£ `idx_properties_developer_search`
```sql
CREATE INDEX ON properties(is_active, developer_id, price) 
WHERE is_active = true;
```
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ü–æ–∏—Å–∫ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∑–∞—Å—Ç—Ä–æ–π—â–∏–∫–∞  
**–≠—Ñ—Ñ–µ–∫—Ç:** –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞—Å—Ç—Ä–æ–π—â–∏–∫–∞

#### 3Ô∏è‚É£ `idx_properties_district_search`
```sql
CREATE INDEX ON properties(is_active, district_id, rooms, price) 
WHERE is_active = true AND district_id IS NOT NULL;
```
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –§–∏–ª—å—Ç—Ä "–†–∞–π–æ–Ω—ã" –Ω–∞ –≥–ª–∞–≤–Ω–æ–π  
**–≠—Ñ—Ñ–µ–∫—Ç:** –£—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ **5-10 —Ä–∞–∑**

#### 4Ô∏è‚É£ `idx_properties_area_price`
```sql
CREATE INDEX ON properties(area, price) 
WHERE is_active = true AND area IS NOT NULL AND price IS NOT NULL;
```
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** Range queries –ø–æ –ø–ª–æ—â–∞–¥–∏ –∏ —Ü–µ–Ω–µ  
**–≠—Ñ—Ñ–µ–∫—Ç:** –ë—ã—Å—Ç—Ä—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã

---

### –§–∞–∑–∞ 4: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è residential_complexes (‚úÖ 3 –∏–Ω–¥–µ–∫—Å–∞)

| –ò–Ω–¥–µ–∫—Å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---|---|
| `idx_rc_is_active` | –§–∏–ª—å—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –ñ–ö |
| `idx_rc_district_id` | –ü–æ–∏—Å–∫ –ñ–ö –ø–æ —Ä–∞–π–æ–Ω—É |
| `idx_rc_developer_active` | –ê–∫—Ç–∏–≤–Ω—ã–µ –ñ–ö –∑–∞—Å—Ç—Ä–æ–π—â–∏–∫–∞ (—Å–æ—Å—Ç–∞–≤–Ω–æ–π) |

---

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- ‚ö†Ô∏è 48% –∑–∞–ø—Ä–æ—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ sequential scan (–ø–æ–ª–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)
- ‚ö†Ô∏è –ù–µ—Ç –∏–Ω–¥–µ–∫—Å–æ–≤ –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–æ–ª—è—Ö (district_id, is_active, floor)
- ‚ö†Ô∏è –î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –∏–Ω–¥–µ–∫—Å—ã —Ç—Ä–∞—Ç–∏–ª–∏ –ø–∞–º—è—Ç—å
- ‚ö†Ô∏è –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å: **70%**

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- ‚úÖ **100%** –∑–∞–ø—Ä–æ—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏–Ω–¥–µ–∫—Å—ã
- ‚úÖ –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –≤—Å–µ—Ö —á–∞—Å—Ç—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- ‚úÖ Partial –∏–Ω–¥–µ–∫—Å—ã —ç–∫–æ–Ω–æ–º—è—Ç –ø–∞–º—è—Ç—å –∏ —É—Å–∫–æ—Ä—è—é—Ç —Ä–∞–±–æ—Ç—É
- ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å: **100%**

---

## üéØ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å DomClick

| –ö—Ä–∏—Ç–µ—Ä–∏–π | InBack (–¥–æ) | InBack (–ø–æ—Å–ª–µ) | DomClick |
|---|:---:|:---:|:---:|
| –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ –≤—Å–µ—Ö —Ñ–∏–ª—å—Ç—Ä–∞—Ö | ‚ùå 60% | ‚úÖ 100% | ‚úÖ 100% |
| –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã | ‚ùå 0 | ‚úÖ 4 | ‚úÖ –ï—Å—Ç—å |
| Partial –∏–Ω–¥–µ–∫—Å—ã | ‚ùå 0 | ‚úÖ 9 | ‚úÖ –ï—Å—Ç—å |
| –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ | ‚úÖ | ‚úÖ | ‚úÖ |
| –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è | ‚úÖ | ‚úÖ | ‚úÖ |
| **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –Ω–∞–≥—Ä—É–∑–∫–µ** | ‚ö†Ô∏è 70% | **‚úÖ 100%** | ‚úÖ 100% |

---

## üí™ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:
- ‚úÖ **354 –æ–±—ä–µ–∫—Ç–∞** (—Ç–µ–∫—É—â–∏–π —Ä–∞–∑–º–µ—Ä) - –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞
- ‚úÖ **10,000 –æ–±—ä–µ–∫—Ç–æ–≤** - –≥–æ—Ç–æ–≤—ã –∫ –º–∞—Å—Å–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ
- ‚úÖ **100,000+ –æ–±—ä–µ–∫—Ç–æ–≤** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞

### –¢–∏–ø–∏—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:
- üöÄ –ü–æ–∏—Å–∫ –∫–≤–∞—Ä—Ç–∏—Ä –≤ –ñ–ö: **<5ms**
- üöÄ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–∞–π–æ–Ω—É: **<10ms**
- üöÄ –ü–æ–∏—Å–∫ –ø–æ –∑–∞—Å—Ç—Ä–æ–π—â–∏–∫—É: **<5ms**
- üöÄ –î–∏–∞–ø–∞–∑–æ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã: **<15ms**

---

## üìã –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–Ω–¥–µ–∫—Å–æ–≤

### Properties (17 –∏–Ω–¥–µ–∫—Å–æ–≤):
1. `properties_pkey` - PRIMARY KEY
2. `properties_inner_id_key` - UNIQUE (–∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤)
3. `properties_slug_key` - UNIQUE (SEO)
4. `idx_properties_complex_id` - JOIN —Å –ñ–ö
5. `idx_properties_developer_id` - JOIN —Å –∑–∞—Å—Ç—Ä–æ–π—â–∏–∫–∞–º–∏
6. `idx_properties_district_id` - –§–∏–ª—å—Ç—Ä –ø–æ —Ä–∞–π–æ–Ω—É
7. `idx_properties_is_active` - –§–∏–ª—å—Ç—Ä –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
8. `idx_properties_rooms` - –§–∏–ª—å—Ç—Ä –ø–æ –∫–æ–º–Ω–∞—Ç–∞–º
9. `idx_properties_price` - –§–∏–ª—å—Ç—Ä –ø–æ —Ü–µ–Ω–µ
10. `idx_properties_area` - –§–∏–ª—å—Ç—Ä –ø–æ –ø–ª–æ—â–∞–¥–∏
11. `idx_properties_floor` - –§–∏–ª—å—Ç—Ä –ø–æ —ç—Ç–∞–∂—É
12. `idx_properties_total_floors` - –§–∏–ª—å—Ç—Ä –ø–æ —ç—Ç–∞–∂–Ω–æ—Å—Ç–∏
13. `idx_properties_deal_type` - –¢–∏–ø —Å–¥–µ–ª–∫–∏
14. `idx_properties_hot_search` - üî• –°–æ—Å—Ç–∞–≤–Ω–æ–π (–≥–ª–∞–≤–Ω—ã–π –ø–æ–∏—Å–∫)
15. `idx_properties_developer_search` - üî• –°–æ—Å—Ç–∞–≤–Ω–æ–π (–ø–æ –∑–∞—Å—Ç—Ä–æ–π—â–∏–∫—É)
16. `idx_properties_district_search` - üî• –°–æ—Å—Ç–∞–≤–Ω–æ–π (–ø–æ —Ä–∞–π–æ–Ω—É)
17. `idx_properties_area_price` - üî• –°–æ—Å—Ç–∞–≤–Ω–æ–π (–¥–∏–∞–ø–∞–∑–æ–Ω—ã)

### Residential Complexes (7 –∏–Ω–¥–µ–∫—Å–æ–≤):
1. `residential_complexes_pkey` - PRIMARY KEY
2. `residential_complexes_slug_key` - UNIQUE (SEO)
3. `residential_complexes_complex_id_key` - UNIQUE (–≤–Ω–µ—à–Ω–∏–π ID)
4. `idx_complex_developer` - JOIN —Å –∑–∞—Å—Ç—Ä–æ–π—â–∏–∫–∞–º–∏
5. `idx_rc_is_active` - –§–∏–ª—å—Ç—Ä –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
6. `idx_rc_district_id` - –§–∏–ª—å—Ç—Ä –ø–æ —Ä–∞–π–æ–Ω—É
7. `idx_rc_developer_active` - üî• –°–æ—Å—Ç–∞–≤–Ω–æ–π

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø–∞—Ä—Å–µ—Ä–∞

### 1. –ú–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:
```sql
-- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ COPY –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏
COPY properties (name, complex_id, developer_id, ...) 
FROM 'data.csv' WITH CSV HEADER;

-- –ò–ª–∏ batch INSERT (500-1000 –∑–∞–ø–∏—Å–µ–π –∑–∞ —Ä–∞–∑)
INSERT INTO properties (...) VALUES (...), (...), ...
ON CONFLICT (inner_id) DO UPDATE SET ...;
```

### 2. –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤:
```sql
-- –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ complex_id –∏–ª–∏ inner_id –¥–ª—è –∑–∞—â–∏—Ç—ã
INSERT INTO residential_complexes (name, complex_id, ...)
VALUES (...)
ON CONFLICT (complex_id) DO UPDATE SET ...;
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:
```sql
-- –ü–æ—Å–ª–µ –º–∞—Å—Å–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
ANALYZE properties;
ANALYZE residential_complexes;
```

---

## ‚úÖ –í—ã–≤–æ–¥—ã

**–ë–î InBack —Ç–µ–ø–µ—Ä—å:**
- ‚úÖ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —É—Ä–æ–≤–Ω—é DomClick** –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ **–ì–æ—Ç–æ–≤–∞ –∫ –Ω–∞–≥—Ä—É–∑–∫–µ** –ª—é–±–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∞ (10K-100K+ –æ–±—ä–µ–∫—Ç–æ–≤)
- ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞** –¥–ª—è –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ **–ó–∞—â–∏—â–µ–Ω–∞** –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø—Ä–∏ –º–∞—Å—Å–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞** - –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –º–∏–ª–ª–∏–æ–Ω—ã –∑–∞–ø–∏—Å–µ–π

**–°—Ç–∞—Ç—É—Å:** üéâ **–ì–û–¢–û–í–û –ö PRODUCTION!**
